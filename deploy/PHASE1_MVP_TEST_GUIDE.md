# Phase 1 MVP í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ

**ìƒì„±ì¼**: 2025-12-28
**ëª©í‘œ**: 600ëŒ€ ë””ë°”ì´ìŠ¤ì—ì„œ YouTube ì˜ìƒ ì‹œì²­ + ë¡œê·¸ ì €ì¥

---

## ğŸ“‹ êµ¬í˜„ ë²”ìœ„

### âœ… í¬í•¨
1. ADB over WiFi ì—°ê²° (Tailscale ê²½ìœ )
2. YouTube ì•± ì‹¤í–‰
3. ì˜ìƒ ê²€ìƒ‰ ë˜ëŠ” í™ˆ í”¼ë“œ ì§„ì…
4. ì˜ìƒ ì¬ìƒ (30ì´ˆ-3ë¶„)
5. ì‹œì²­ ê¸°ë¡ ì €ì¥ (Supabase `results` í…Œì´ë¸”)

### âŒ ì œì™¸ (Phase 2 ì´í›„)
- ë°œê²¬ë¬¼ ì ìˆ˜ ê³„ì‚°
- ëŒ“ê¸€ ê¸°ëŠ¥
- í˜ë¥´ì†Œë‚˜
- ìŠ¤ì¼€ì¤„ëŸ¬
- ì‹¤ì‹œê°„ ëŒ€ì‹œë³´ë“œ

---

## ğŸ”§ ì‚¬ì „ ì¤€ë¹„

### 1. Tailscale ì—°ê²° í™•ì¸

```bash
ssh root@158.247.210.152
tailscale status
```

**í™•ì¸ ì‚¬í•­**:
- `aifram` ì„œë²„ ì˜¨ë¼ì¸
- ì„œë¸Œë„· ë¼ìš°íŠ¸ `10.0.0.0/8` ìŠ¹ì¸ ì™„ë£Œ
- Ping í…ŒìŠ¤íŠ¸: `ping 10.0.10.1`

### 2. í˜„ì¥ ë„¤íŠ¸ì›Œí¬ ì„¤ì • (ì‚¬ì „ ì™„ë£Œ í•„ìš”)

- [ ] ê´€ë¦¬í˜• ìŠ¤ìœ„ì¹˜ VLAN 10-60 ì„¤ì •
- [ ] AP 6ëŒ€ ì„¤ì • ì™„ë£Œ (SSID, IP ë²”ìœ„)
- [ ] í°ë³´ë“œ 600ëŒ€ WiFi ì—°ê²°
- [ ] ê° ë””ë°”ì´ìŠ¤ ADB over WiFi í™œì„±í™” (í¬íŠ¸ 5555)

### 3. ì„œë²„ ìƒíƒœ í™•ì¸

```bash
ssh root@158.247.210.152
cd /opt/aifarm
source venv/bin/activate

# ì„œë¹„ìŠ¤ ìƒíƒœ
systemctl status aifarm

# í—¬ìŠ¤ì²´í¬
curl http://localhost:8080/health
```

---

## ğŸ¬ Phase 1 í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

### Test 1: ë‹¨ì¼ ë””ë°”ì´ìŠ¤ ì‹œì²­ (1ëŒ€)

**ëª©í‘œ**: 1ëŒ€ ë””ë°”ì´ìŠ¤ì—ì„œ YouTube ì˜ìƒ 1ê°œ ì‹œì²­ ì„±ê³µ

#### 1.1 Ping í…ŒìŠ¤íŠ¸

```bash
ssh root@158.247.210.152
ping 10.0.10.1
```

**ì˜ˆìƒ ê²°ê³¼**:
```
64 bytes from 10.0.10.1: icmp_seq=1 ttl=64 time=2.5 ms
```

#### 1.2 ADB ì—°ê²° í…ŒìŠ¤íŠ¸

```bash
cd /opt/aifarm
source venv/bin/activate

# ADB ì—°ê²° í…ŒìŠ¤íŠ¸ (ê¸°ì¡´ ìŠ¤í¬ë¦½íŠ¸)
python scripts/test_adb_connection.py --ip 10.0.10.1
```

**ì˜ˆìƒ ê²°ê³¼**:
```
âœ… ì—°ê²° ì„±ê³µ
  - ëª¨ë¸: SM-A135F
  - ì œì¡°ì‚¬: samsung
  - Android ë²„ì „: 13
âœ… ê¸°ë³¸ ëª…ë ¹ ì„±ê³µ
```

#### 1.3 YouTube ì‹œì²­ í…ŒìŠ¤íŠ¸ (MVP)

```bash
cd /opt/aifarm
source venv/bin/activate

# ë‹¨ì¼ ë””ë°”ì´ìŠ¤ ì‹œì²­ (60ì´ˆ)
python scripts/watch_simple.py \
  --ip 10.0.10.1 \
  --url "https://www.youtube.com/watch?v=dQw4w9WgXcQ" \
  --duration 60
```

**ì˜ˆìƒ ì¶œë ¥**:
```
INFO - ì‹œì²­ ì‹œì‘: 10.0.10.1 -> https://www.youtube.com/watch?v=dQw4w9WgXcQ
INFO - 10.0.10.1: ì—°ê²° ì‹œë„ ì¤‘...
INFO - âœ“ 10.0.10.1:5555 TCP ì—°ê²° ì„±ê³µ
INFO - 10.0.10.1: YouTube ì•± ì‹¤í–‰
INFO - 10.0.10.1: ì˜ìƒ ì—´ê¸° dQw4w9WgXcQ
INFO - 10.0.10.1: 60ì´ˆ ì‹œì²­ ì¤‘...
INFO - 10.0.10.1: ì‹œì²­ ì™„ë£Œ (60ì´ˆ)

============================================================
ì‹œì²­ ê²°ê³¼:
============================================================
  device_ip: 10.0.10.1
  video_url: https://www.youtube.com/watch?v=dQw4w9WgXcQ
  watch_time: 60
  status: success
  watched_at: 2025-12-28T15:30:45.123456
============================================================
```

#### 1.4 Supabase ì €ì¥ í…ŒìŠ¤íŠ¸

```bash
# Supabaseì— ì €ì¥
python scripts/watch_simple.py \
  --ip 10.0.10.1 \
  --url "https://www.youtube.com/watch?v=dQw4w9WgXcQ" \
  --duration 60 \
  --save
```

**Supabase í™•ì¸**:
```bash
# Supabase ëŒ€ì‹œë³´ë“œ ë˜ëŠ” SQL
SELECT * FROM results ORDER BY created_at DESC LIMIT 1;
```

**ì˜ˆìƒ ë ˆì½”ë“œ**:
```
device_ip       | 10.0.10.1
video_url       | https://www.youtube.com/watch?v=dQw4w9WgXcQ
watch_time      | 60
status          | success
watched_at      | 2025-12-28T15:30:45.123456
```

---

### Test 2: 10ëŒ€ ë™ì‹œ ì‹œì²­

**ëª©í‘œ**: 10ëŒ€ ë””ë°”ì´ìŠ¤ì—ì„œ ë™ì‹œì— ì˜ìƒ ì‹œì²­ ì„±ê³µ

#### 2.1 10ëŒ€ ë””ë°”ì´ìŠ¤ ì„ íƒ

VLAN 10ì˜ ì²˜ìŒ 10ëŒ€:
```
10.0.10.1
10.0.10.2
10.0.10.3
10.0.10.4
10.0.10.5
10.0.10.6
10.0.10.7
10.0.10.8
10.0.10.9
10.0.10.10
```

#### 2.2 ë°°ì¹˜ ì‹œì²­ ì‹¤í–‰

```bash
cd /opt/aifarm
source venv/bin/activate

# 10ëŒ€ ë™ì‹œ ì‹œì²­ (60ì´ˆ)
python scripts/watch_batch.py \
  --ips 10.0.10.1 10.0.10.2 10.0.10.3 10.0.10.4 10.0.10.5 \
        10.0.10.6 10.0.10.7 10.0.10.8 10.0.10.9 10.0.10.10 \
  --url "https://www.youtube.com/watch?v=dQw4w9WgXcQ" \
  --duration 60 \
  --workers 10
```

**ì˜ˆìƒ ì¶œë ¥**:
```
INFO - ë°°ì¹˜ ì‹œì²­ ì‹œì‘: 10ëŒ€ ë””ë°”ì´ìŠ¤
INFO - ì˜ìƒ: https://www.youtube.com/watch?v=dQw4w9WgXcQ
INFO - ì‹œì²­ ì‹œê°„: 60ì´ˆ
INFO - ë™ì‹œ ì‹¤í–‰: 10ê°œ
INFO - [10.0.10.1] ì‹œì²­ ì‹œì‘
INFO - [10.0.10.2] ì‹œì²­ ì‹œì‘
...
INFO - [10.0.10.1] ì‹œì²­ ì™„ë£Œ (60ì´ˆ)
INFO - [10.0.10.2] ì‹œì²­ ì™„ë£Œ (60ì´ˆ)
...
INFO - ë°°ì¹˜ ì‹œì²­ ì™„ë£Œ:
INFO -   ì„±ê³µ: 8/10ëŒ€
INFO -   ì‹¤íŒ¨: 2/10ëŒ€

================================================================================
ë°°ì¹˜ ì‹œì²­ ê²°ê³¼: 10ëŒ€
================================================================================

âœ… ì„±ê³µ: 8ëŒ€
  - 10.0.10.1: 60ì´ˆ
  - 10.0.10.2: 60ì´ˆ
  - 10.0.10.3: 60ì´ˆ
  - 10.0.10.4: 60ì´ˆ
  - 10.0.10.5: 60ì´ˆ
  - 10.0.10.6: 60ì´ˆ
  - 10.0.10.8: 60ì´ˆ
  - 10.0.10.9: 60ì´ˆ

âŒ ì‹¤íŒ¨: 2ëŒ€
  - 10.0.10.7: Connection failed: 10.0.10.7
  - 10.0.10.10: Connection failed: 10.0.10.10
================================================================================
```

#### 2.3 Supabase ì €ì¥

```bash
# Supabaseì— ì €ì¥
python scripts/watch_batch.py \
  --ips 10.0.10.1 10.0.10.2 10.0.10.3 10.0.10.4 10.0.10.5 \
        10.0.10.6 10.0.10.7 10.0.10.8 10.0.10.9 10.0.10.10 \
  --url "https://www.youtube.com/watch?v=dQw4w9WgXcQ" \
  --duration 60 \
  --workers 10 \
  --save
```

**Supabase í™•ì¸**:
```bash
# ìµœê·¼ 10ê±´ ì¡°íšŒ
SELECT device_ip, watch_time, status, watched_at
FROM results
ORDER BY created_at DESC
LIMIT 10;
```

---

### Test 3: 100ëŒ€ ë™ì‹œ ì‹œì²­ (ì„ íƒì )

**ëª©í‘œ**: 100ëŒ€ ë””ë°”ì´ìŠ¤ì—ì„œ ë™ì‹œ ì‹œì²­ (ì„±ëŠ¥ í…ŒìŠ¤íŠ¸)

#### 3.1 100ëŒ€ IP ìƒì„±

```bash
# Pythonìœ¼ë¡œ IP ìƒì„±
python3 << 'EOF'
ips = [f"10.0.{vlan}.{slot}"
       for vlan in range(10, 20)
       for slot in range(1, 11)]
print(' '.join(ips))
EOF
```

#### 3.2 ë°°ì¹˜ ì‹œì²­ ì‹¤í–‰

```bash
cd /opt/aifarm
source venv/bin/activate

# 100ëŒ€ ë™ì‹œ ì‹œì²­ (30ì´ˆ, ë¹ ë¥¸ í…ŒìŠ¤íŠ¸)
python scripts/watch_batch.py \
  --ips $(python3 -c "print(' '.join([f'10.0.{v}.{s}' for v in range(10,20) for s in range(1,11)]))") \
  --url "https://www.youtube.com/watch?v=dQw4w9WgXcQ" \
  --duration 30 \
  --workers 50 \
  --save
```

**ì„±ê³µ ê¸°ì¤€**:
- ì„±ê³µë¥  >= 80% (80ëŒ€ ì´ìƒ)
- í‰ê·  ì‹œì²­ ì‹œê°„: 30ì´ˆ Â± 5ì´ˆ
- ì—ëŸ¬: ë„¤íŠ¸ì›Œí¬ íƒ€ì„ì•„ì›ƒ, ë””ë°”ì´ìŠ¤ ì˜¤í”„ë¼ì¸ë§Œ í—ˆìš©

---

## ğŸ“Š ì„±ê³µ ê¸°ì¤€

### ìµœì†Œ ê¸°ì¤€ (MVP í†µê³¼)
- [ ] 1ëŒ€ ë””ë°”ì´ìŠ¤ ì‹œì²­ ì„±ê³µ
- [ ] Supabase `results` í…Œì´ë¸”ì— ê¸°ë¡ ì €ì¥
- [ ] 10ëŒ€ ë™ì‹œ ì‹œì²­ ì„±ê³µë¥  >= 80%
- [ ] ì—ëŸ¬ ë¡œê·¸ ì •ìƒ ì¶œë ¥

### ê¶Œì¥ ê¸°ì¤€ (í”„ë¡œë•ì…˜ ì¤€ë¹„)
- [ ] 100ëŒ€ ë™ì‹œ ì‹œì²­ ì„±ê³µë¥  >= 85%
- [ ] í‰ê·  ì‹œì²­ ì‹œê°„ ì˜¤ì°¨ < 10%
- [ ] ë””ë°”ì´ìŠ¤ ì˜¤ë²„íˆíŒ… ì—†ìŒ
- [ ] ì„œë²„ CPU/ë©”ëª¨ë¦¬ ì‚¬ìš©ë¥  < 70%

---

## ğŸ” ë¬¸ì œ í•´ê²°

### ë¬¸ì œ 1: Ping ì‹¤íŒ¨

**ì¦ìƒ**: `ping 10.0.10.1` no response

**í•´ê²°**:
1. Tailscale ìƒíƒœ í™•ì¸
   ```bash
   tailscale status
   tailscale up --advertise-routes=10.0.0.0/8 --accept-routes
   ```
2. Tailscale Admin Consoleì—ì„œ ì„œë¸Œë„· ë¼ìš°íŠ¸ ìŠ¹ì¸
3. í˜„ì¥ ë¼ìš°í„°ì—ì„œ Tailscale ì‹¤í–‰ í™•ì¸

---

### ë¬¸ì œ 2: ADB ì—°ê²° ì‹¤íŒ¨

**ì¦ìƒ**: `Connection failed: 10.0.10.1`

**í•´ê²°**:
1. ë””ë°”ì´ìŠ¤ì—ì„œ ADB over WiFi ì¬í™œì„±í™”
   ```bash
   # USB ì—°ê²° í›„
   adb tcpip 5555
   ```
2. ë””ë°”ì´ìŠ¤ ì¬ë¶€íŒ… í›„ ì¬ì‹œë„
3. ë°©í™”ë²½ í™•ì¸
   ```bash
   ufw status
   ufw allow 5555/tcp
   ```

---

### ë¬¸ì œ 3: YouTube ì•± ì‹¤í–‰ ì•ˆ ë¨

**ì¦ìƒ**: ì•±ì´ ì‹œì‘ë˜ì§€ ì•ŠìŒ

**í•´ê²°**:
1. YouTube ì•± ì„¤ì¹˜ í™•ì¸
   ```python
   device = u2.connect("10.0.10.1:5555")
   print(device.app_list("youtube"))
   ```
2. ì•± ê°•ì œ ì¢…ë£Œ í›„ ì¬ì‹œì‘
   ```python
   device.app_stop("com.google.android.youtube")
   device.app_start("com.google.android.youtube")
   ```

---

### ë¬¸ì œ 4: Supabase ì €ì¥ ì‹¤íŒ¨

**ì¦ìƒ**: "ì €ì¥ ì‹¤íŒ¨: ..."

**í•´ê²°**:
1. í™˜ê²½ë³€ìˆ˜ í™•ì¸
   ```bash
   cat /opt/aifarm/.env | grep SUPABASE
   ```
2. Supabase ì—°ê²° í…ŒìŠ¤íŠ¸
   ```python
   from src.data.supabase_client import get_supabase_client
   client = get_supabase_client()
   print(client.table('results').select('*').limit(1).execute())
   ```

---

## ğŸ“ ê´€ë ¨ íŒŒì¼

```
d:\exe.blue\ai-fram\
â”œâ”€â”€ aifarm/
â”‚   â”œâ”€â”€ scripts/
â”‚   â”‚   â”œâ”€â”€ watch_simple.py       â† ë‹¨ì¼ ë””ë°”ì´ìŠ¤ ì‹œì²­
â”‚   â”‚   â”œâ”€â”€ watch_batch.py        â† ë‹¤ì¤‘ ë””ë°”ì´ìŠ¤ ë™ì‹œ ì‹œì²­
â”‚   â”‚   â””â”€â”€ test_adb_connection.py (ê¸°ì¡´)
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ controller/device_manager.py
â”‚       â””â”€â”€ data/supabase_client.py
â”œâ”€â”€ deploy/
â”‚   â””â”€â”€ PHASE1_MVP_TEST_GUIDE.md  â† ì´ íŒŒì¼
â””â”€â”€ shared/database/init.sql
```

---

## âœ… ì™„ë£Œ ë³´ê³  í˜•ì‹

í…ŒìŠ¤íŠ¸ ì™„ë£Œ í›„ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë³´ê³ :

```
## Phase 1 MVP í…ŒìŠ¤íŠ¸ ì™„ë£Œ ë³´ê³ 

### Test 1: ë‹¨ì¼ ë””ë°”ì´ìŠ¤ (1ëŒ€)
- [x] Ping ì„±ê³µ
- [x] ADB ì—°ê²° ì„±ê³µ
- [x] YouTube ì‹œì²­ ì„±ê³µ (60ì´ˆ)
- [x] Supabase ì €ì¥ ì„±ê³µ

### Test 2: 10ëŒ€ ë™ì‹œ ì‹œì²­
- ì„±ê³µ: 8/10ëŒ€ (80%)
- ì‹¤íŒ¨: 2ëŒ€ (10.0.10.7, 10.0.10.10 - ë„¤íŠ¸ì›Œí¬ íƒ€ì„ì•„ì›ƒ)
- í‰ê·  ì‹œì²­ ì‹œê°„: 60ì´ˆ
- Supabase ì €ì¥: 8ê±´

### Test 3: 100ëŒ€ ë™ì‹œ ì‹œì²­ (ì„ íƒ)
- [ ] ì„±ê³µ: XX/100ëŒ€ (XX%)
- [ ] í‰ê·  ì‹œì²­ ì‹œê°„: XXì´ˆ

### ë¬¸ì œì 
- 10.0.10.7, 10.0.10.10: WiFi ì—°ê²° ë¶ˆì•ˆì • (í˜„ì¥ í™•ì¸ í•„ìš”)

### ë‹¤ìŒ ë‹¨ê³„
- [ ] ì‹¤íŒ¨ ë””ë°”ì´ìŠ¤ ì¬ì—°ê²° ì‹œë„
- [ ] 600ëŒ€ ì „ì²´ í…ŒìŠ¤íŠ¸ ì¤€ë¹„
- [ ] Phase 2: ë°œê²¬ë¬¼ ì ìˆ˜ ê³„ì‚° êµ¬í˜„
```

---

**í…ŒìŠ¤íŠ¸ ì‹œì‘ì¼**: 2025-12-28
**ì˜ˆìƒ ì†Œìš” ì‹œê°„**: 1-2ì‹œê°„ (10ëŒ€ í…ŒìŠ¤íŠ¸ ê¸°ì¤€)
