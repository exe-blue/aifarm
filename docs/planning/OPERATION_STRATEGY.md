# 운영 전략 (Operation Strategy)

**생성일**: 2025-12-28
**용도**: 시간대별/요일별 활동 강도 및 디바이스 할당 전략

---

## 시간대별 활동 강도 (24시간)

### 활동 강도 표

| 시간대 | 활동 강도 | 활성 디바이스 | 활동 초점 | 주요 활동 |
|--------|----------|------------|---------|---------|
| 00:00-03:00 | 20% | 120대 | 야간 콘텐츠, 로그 분석 | Shorts 리믹스(50대), 데이터 정리(70대) |
| 03:00-06:00 | 15% | 90대 | 최저 활동, 시스템 유지보수 | 썸네일 랩(20대), 배치 처리(70대) |
| 06:00-09:00 | 60% | 360대 | 아침 트렌드, 출근 시간대 | 트렌드 스카우트(100대), 코멘터(200대), Shorts(60대) |
| 09:00-12:00 | 100% | 600대 | 적극적 활동, 업무 시간대 | 전체 활동 (풀 가동) |
| 12:00-14:00 | 80% | 480대 | 점심 콘텐츠, 엔터테인먼트 | 플레이리스트(80대), 코멘터(200대), Shorts(120대) |
| 14:00-18:00 | 100% | 600대 | 적극적 활동, 오후 피크 | 전체 활동 (풀 가동) |
| 18:00-21:00 | 90% | 540대 | 저녁 피크, 최대 트래픽 | 트렌드(100대), 챌린지(50대), 코멘터(200대), Shorts(150대) |
| 21:00-24:00 | 50% | 300대 | 야간 콘텐츠, 마무리 | Shorts(100대), 챌린지(50대), 데이터 집계(150대) |

### 시간대별 상세 전략

#### 00:00-03:00 (심야)
- **활동 강도**: 20% (120대)
- **주요 활동**:
  - Shorts 리믹스: 야간 콘텐츠 수집
  - 데이터 정리: 금일 발견물 중복 제거, 점수 재계산
  - 배치 작업: 주간 리포트 생성 (금요일 02:00)
- **페르소나 비율**: 관찰자(30%), 분석가(15%), 전문가(10%)

#### 03:00-06:00 (새벽)
- **활동 강도**: 15% (90대)
- **주요 활동**:
  - 썸네일 랩: 해외 타임존 콘텐츠 수집
  - 시스템 점검: 디바이스 배터리, 네트워크 상태
  - DB 백업: 일일 백업 (05:00)
- **페르소나 비율**: 관찰자(40%)

#### 06:00-09:00 (아침)
- **활동 강도**: 60% (360대)
- **주요 활동**:
  - 트렌드 스카우트: 아침 뉴스, 출근 콘텐츠
  - 페르소나 코멘터: 교육/자기계발 영상
  - Shorts 리믹스: 모닝 루틴 콘텐츠
- **페르소나 비율**: 초보자(20%), 공감형(15%), 조언자(15%)

#### 09:00-12:00 (오전 업무)
- **활동 강도**: 100% (600대)
- **주요 활동**:
  - 전체 활동 풀 가동
  - 트렌드 스카우트: 트렌딩 TOP 50 스캔
  - 플레이리스트 큐레이터: 업무 관련 콘텐츠
  - 페르소나 코멘터: 전문성 콘텐츠
- **페르소나 비율**: 전문가(12%), 조언자(15%), 분석가(10%)

#### 12:00-14:00 (점심)
- **활동 강도**: 80% (480대)
- **주요 활동**:
  - Shorts 리믹스: 엔터테인먼트 증가
  - 플레이리스트 큐레이터: 취미/여가 콘텐츠
  - 페르소나 코멘터: 예능/브이로그
- **페르소나 비율**: 유머러스(18%), 열정팬(15%), 초보자(15%)

#### 14:00-18:00 (오후 업무)
- **활동 강도**: 100% (600대)
- **주요 활동**:
  - 전체 활동 풀 가동
  - 트렌드 스카우트: 오후 트렌드 변화 모니터링
  - 썸네일 랩: 검색 순위 변동 추적
- **페르소나 비율**: 전문가(12%), 분석가(10%), 조언자(12%)

#### 18:00-21:00 (저녁 피크)
- **활동 강도**: 90% (540대)
- **주요 활동**:
  - 트렌드 스카우트: 저녁 급상승 영상
  - 챌린지 헌터: 챌린지 활성 시간대
  - Shorts 리믹스: 최대 바이럴 시간대
  - 페르소나 코멘터: 엔터테인먼트 집중
- **페르소나 비율**: 열정팬(18%), 유머러스(18%), 초보자(15%)

#### 21:00-24:00 (야간)
- **활동 강도**: 50% (300대)
- **주요 활동**:
  - Shorts 리믹스: 야간 콘텐츠
  - 챌린지 헌터: 야간 챌린지
  - 데이터 집계: 일일 통계 생성 (23:30)
- **페르소나 비율**: 공감형(15%), 트렌드세터(8%), 관찰자(15%)

---

## 요일별 전략

### 월-목 (평일 일반 운영)

**콘텐츠 비중**:
- 뉴스/정보성: 60%
- 엔터테인먼트: 40%

**주요 활동**:
- 트렌드 스카우트: 업무 시간대 집중 (09-18시)
- 플레이리스트 큐레이터: 교육/비즈니스 콘텐츠
- 페르소나 코멘터: 전문성 페르소나 비율 증가

**디바이스 할당** (일반 모드):
- Shorts 리믹스: 150대 (25%)
- 플레이리스트: 80대 (13%)
- 페르소나 코멘터: 200대 (33%)
- 트렌드 스카우트: 100대 (17%)
- 챌린지 헌터: 50대 (8%)
- 썸네일 랩: 20대 (3%)

---

### 금요일 (주말 준비 모드)

**콘텐츠 비중**:
- 뉴스/정보성: 40%
- 엔터테인먼트: 60%

**특별 작업**:
- 18:00: 주간 리포트 생성
  - 총 발견물 통계
  - 카테고리별 트렌드 분석
  - TOP 10 바이럴 콘텐츠
  - 페르소나 성과 순위
  - 에러 로그 요약
- 19:00-21:00: 트렌드 예측 강화
  - 주말 트렌드 예상
  - 챌린지 확산 가능성 평가

**디바이스 할당** (주말 준비):
- Shorts 리믹스: 180대 (30%) ↑
- 플레이리스트: 60대 (10%) ↓
- 페르소나 코멘터: 220대 (37%) ↑
- 트렌드 스카우트: 80대 (13%) ↓
- 챌린지 헌터: 40대 (7%) ↓
- 썸네일 랩: 20대 (3%)

---

### 토-일 (주말 엔터테인먼트 집중)

**콘텐츠 비중**:
- 뉴스/정보성: 20%
- 엔터테인먼트: 80%

**주요 활동**:
- Shorts 리믹스: 바이럴 콘텐츠 최대 수집
- 챌린지 헌터: 활동 강도 150% (75대)
- 페르소나 코멘터: 열정팬, 유머러스 비율 2배

**디바이스 할당** (주말 모드):
- Shorts 리믹스: 220대 (37%) ↑↑
- 플레이리스트: 40대 (7%) ↓↓
- 페르소나 코멘터: 240대 (40%) ↑
- 트렌드 스카우트: 60대 (10%) ↓
- 챌린지 헌터: 75대 (12%) ↑
- 썸네일 랩: 25대 (4%)

**페르소나 비율 조정** (주말):
- 열정팬: 12% → 24% (2배)
- 유머러스: 13% → 26% (2배)
- 초보자: 15% → 20% ↑
- 공감형: 10% → 15% ↑
- 전문가: 8% → 4% ↓
- 분석가: 7% → 3% ↓

---

## 디바이스 할당 요약

### 평일 (월-목)
| 활동 | 할당 대수 | 비율 | 우선순위 | 활동 시간 |
|------|---------|-----|---------|---------|
| Shorts 리믹스 | 150대 | 25% | 높음 | 24시간 (저녁 집중) |
| 플레이리스트 큐레이터 | 80대 | 13% | 중간 | 09-18시 |
| 페르소나 코멘터 | 200대 | 33% | 높음 | 24시간 (비율 조정) |
| 트렌드 스카우트 | 100대 | 17% | 높음 | 09-12, 18-21시 |
| 챌린지 헌터 | 50대 | 8% | 중간 | 18-02시 |
| 썸네일 랩 | 20대 | 3% | 낮음 | 24시간 균등 |
| **합계** | **600대** | **100%** | - | - |

### 주말 (토-일)
| 활동 | 할당 대수 | 비율 | 변화 |
|------|---------|-----|------|
| Shorts 리믹스 | 220대 | 37% | +70대 ↑↑ |
| 플레이리스트 큐레이터 | 40대 | 7% | -40대 ↓↓ |
| 페르소나 코멘터 | 240대 | 40% | +40대 ↑ |
| 트렌드 스카우트 | 60대 | 10% | -40대 ↓ |
| 챌린지 헌터 | 75대 | 12% | +25대 ↑ |
| 썸네일 랩 | 25대 | 4% | +5대 |
| **합계** | **660대** | **110%** | 일부 디바이스 다중 활동 |

---

## 에러 처리 및 복구 전략

### 1. 일반 에러

**영상 찾기 실패**:
```python
for attempt in range(3):
    try:
        video = find_video()
        break
    except VideoNotFoundError:
        if attempt == 2:
            log_error("Video not found after 3 attempts")
            skip_to_next_task()
        sleep(5)
```

**네트워크 오류**:
```python
def handle_network_error():
    for attempt in range(3):
        sleep(5 * 60)  # 5분 대기
        if reconnect_network():
            return True

    # 3회 실패 시 오프라인 모드
    enter_offline_mode()
    notify_admin("Device offline: {device_id}")
```

---

### 2. 디바이스 과열

**배터리 온도 모니터링**:
```python
def check_temperature():
    temp = get_battery_temperature()

    if temp > 45:
        # 30분 휴식
        pause_activities(duration=30 * 60)
        log_warning(f"Device overheating: {temp}°C")

    if temp > 50:
        # 긴급 종료
        shutdown_device()
        notify_admin(f"Emergency shutdown: {temp}°C")
```

**연속 활동 제한**:
```python
# 4시간 연속 활동 후 15분 강제 휴식
if continuous_runtime > 4 * 3600:
    pause_activities(duration=15 * 60)
    continuous_runtime = 0
```

---

### 3. 봇 탐지 의심

**댓글 삭제 감지**:
```python
def handle_comment_deleted(channel_id):
    # 해당 채널 24시간 블랙리스트
    add_to_blacklist(channel_id, duration=24 * 3600)
    log_warning(f"Comment deleted on {channel_id}")

    # 삭제율 > 5% 시 전체 활동 1시간 중지
    deletion_rate = calculate_deletion_rate()
    if deletion_rate > 0.05:
        pause_all_commenting(duration=3600)
        notify_admin(f"High deletion rate: {deletion_rate:.1%}")
```

**IP 차단 의심**:
```python
def handle_suspected_ip_ban():
    # 디바이스 재시작
    restart_device()

    # 1시간 대기
    sleep(3600)

    # 다른 WiFi AP로 이동 (VLAN 변경)
    switch_to_different_vlan()
```

---

### 4. 디바이스 오프라인

**하트비트 실패 시**:
```python
# heartbeat_monitor.py에서 처리
if device_status == "offline":
    # 1. 재연결 시도 (3회)
    for _ in range(3):
        if reconnect_adb(device_ip):
            break
        sleep(60)
    else:
        # 2. 관리자 알림
        notify_admin(f"Device {device_ip} offline for 3 minutes")

        # 3. 작업 재할당
        reassign_tasks(device_ip)
```

---

## 성능 최적화

### 1. 배터리 관리
- 화면 밝기: 30%
- 충전 유지: 40-80% (배터리 수명 연장)
- 과충전 방지: 80% 도달 시 충전 중지

### 2. 네트워크 최적화
- WiFi 우선 사용
- 데이터 압축 전송
- 이미지 다운로드 최소화 (썸네일만)

### 3. 작업 우선순위
1. 높음: Shorts 리믹스, 트렌드 스카우트, 페르소나 코멘터
2. 중간: 플레이리스트, 챌린지 헌터
3. 낮음: 썸네일 랩

리소스 부족 시 낮은 우선순위 활동 일시 중지.

---

## 모니터링 지표

### 실시간 모니터링 (1분 간격)
- 활성 디바이스 수
- 현재 활동 분포
- 네트워크 상태
- 평균 배터리 온도

### 시간별 모니터링 (1시간 간격)
- 시간당 발견물 수
- 시간당 댓글 수
- 에러 발생 횟수
- 평균 점수

### 일일 모니터링 (자정)
- 총 발견물 수 (타입별)
- 총 댓글 수 (페르소나별)
- 디바이스 가동률
- 에러율
- 품질 점수 평균
