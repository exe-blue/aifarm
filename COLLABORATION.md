# COLLABORATION.md - 분산 협업 프레임워크

> **이전**: 기획/전략팀이 80% 완성 → 개발팀에 전달 (발산 문제)
> **현재**: 개발팀 중심 + 각 직무가 직접 커뮤니케이션 (통제된 진행)

---

## 🏗️ 협업 아키텍처

```
┌─────────────────────────────────────────────────────────────────┐
│                    🎯 DEVELOPMENT HUB                            │
│                    (Claude Code Team)                           │
│                                                                  │
│   ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐           │
│   │ Claude  │  │ Claude  │  │ Claude  │  │ Claude  │           │
│   │   #1    │  │   #2    │  │   #3    │  │   #4    │           │
│   │ Backend │  │Frontend │  │ DevOps  │  │  Test   │           │
│   └────┬────┘  └────┬────┘  └────┬────┘  └────┬────┘           │
│        │            │            │            │                 │
│        └────────────┴─────┬──────┴────────────┘                 │
│                           │                                      │
│                    ┌──────┴──────┐                              │
│                    │   GitHub    │  ← 단일 진실의 원천          │
│                    │  (Issues,   │                              │
│                    │   PRs, MD)  │                              │
│                    └──────┬──────┘                              │
└───────────────────────────┼─────────────────────────────────────┘
                            │
            ┌───────────────┼───────────────┐
            │               │               │
     ┌──────┴──────┐ ┌──────┴──────┐ ┌──────┴──────┐
     │   기획 노드   │ │  전략 노드   │ │ 오케스트라  │
     │  (Planner)  │ │ (Strategist)│ │   (Orion)   │
     │             │ │             │ │             │
     │ Issue 생성   │ │ 방향 제시   │ │ 우선순위    │
     │ 요구사항 명세 │ │ 로드맵 리뷰 │ │ 충돌 해결   │
     └─────────────┘ └─────────────┘ └─────────────┘
```

---

## 📋 역할 정의

### 개발팀 (Development Hub) - 중심

| 역할 | 담당 | 권한 |
|------|------|------|
| **Claude #1-N** | 코드 구현, PR 생성 | 코드 작성, 머지 |
| **GitHub Repo** | 단일 진실의 원천 | 모든 결정 기록 |

### 외부 노드 - 입력 제공자

| 노드 | 역할 | GitHub 권한 | 커뮤니케이션 방식 |
|------|------|-------------|------------------|
| **기획 (Planner)** | 요구사항 정의 | Issue 생성 | Issue 템플릿 |
| **전략 (Strategist)** | 방향성 제시 | Comment | 로드맵 리뷰 |
| **오케스트라 (Orion)** | 우선순위 조율 | Label 관리 | 충돌 시 결정 |

---

## 🔄 워크플로우

### Phase 1: 요청 수신 (외부 노드 → GitHub)

```markdown
## Issue 템플릿 (기획 노드용)

### 🎯 목표
[한 문장으로 명확하게]

### 📋 요구사항
- [ ] 요구사항 1
- [ ] 요구사항 2

### ✅ 성공 기준 (필수!)
- [ ] 측정 가능한 기준 1
- [ ] 측정 가능한 기준 2

### 🔍 검증 방법
[어떻게 확인할 것인가]

### ⏰ 우선순위
- [ ] P0: 즉시 (다른 작업 중단)
- [ ] P1: 이번 스프린트
- [ ] P2: 다음 스프린트
- [ ] P3: 백로그

### 📎 참고 자료
[링크, 스크린샷 등]
```

### Phase 2: 개발팀 수락 및 계획

```bash
# 개발팀이 Issue를 확인하고 Plan 모드로 진입
# 1. Issue 분석
# 2. 작업 범위 확정
# 3. 예상 시간 산정
# 4. Issue에 계획 코멘트
```

**계획 코멘트 템플릿:**
```markdown
## 📝 개발 계획

### 분석 결과
- 범위: [작업 범위]
- 예상 시간: [X시간]
- 리스크: [있다면]

### 수정 파일
- `path/to/file1` - [변경 내용]
- `path/to/file2` - [변경 내용]

### 검증 계획
1. [검증 단계 1]
2. [검증 단계 2]

### 질문 (있을 경우)
- [ ] [명확화 필요한 사항]

---
✅ 승인 시 작업 시작합니다.
@기획노드 @오케스트라
```

### Phase 3: 구현 및 검증

```
[계획 승인] → [구현] → [검증] → [PR 생성] → [리뷰] → [머지]
```

### Phase 4: 완료 보고

```markdown
## 완료 보고 (PR 또는 Issue 코멘트)

### ✅ 완료된 항목
- [x] 요구사항 1
- [x] 요구사항 2

### 🔍 검증 결과
- 테스트: ✅ 통과
- 린트: ✅ 통과
- 수동 확인: ✅ [스크린샷/로그]

### 📚 문서 업데이트
- DOAI.md: [업데이트 여부]

### 🔗 관련 PR
- #123
```

---

## 🚦 발산 방지 규칙

### 1. Scope Lock (범위 잠금)

```markdown
## Issue 생성 시 필수
- [ ] 요구사항이 3개 이하인가?
- [ ] 예상 작업 시간이 4시간 이하인가?
- [ ] 성공 기준이 측정 가능한가?

❌ 위 조건 미충족 시 → Issue 분할 필요
```

### 2. No Scope Creep (범위 확장 금지)

```
기획 노드: "이것도 추가해주세요"
개발팀: "새 Issue로 등록해주세요. 현재 Issue 범위: [X]"
```

### 3. Single Responsibility (단일 책임)

```
1 Issue = 1 목표 = 1 PR = 1 검증
```

---

## 📁 GitHub 구조

```
doai-me/
├── .github/
│   ├── ISSUE_TEMPLATE/
│   │   ├── feature_request.md      # 기획 노드용
│   │   ├── bug_report.md           # 버그 리포트
│   │   └── strategy_proposal.md    # 전략 노드용
│   └── PULL_REQUEST_TEMPLATE.md
├── docs/
│   ├── decisions/                  # ADR (Architecture Decision Records)
│   │   └── 001-database-choice.md
│   ├── roadmap/                    # 전략 노드 관리
│   │   └── 2025-Q1.md
│   └── handoffs/                   # 인수인계 기록
├── COLLABORATION.md                # 이 문서
├── DOAI.md                         # 개발팀 지식 축적
└── ...
```

---

## 🏷️ Label 체계

### 우선순위 (오케스트라 관리)
- `P0-critical`: 즉시 처리
- `P1-high`: 이번 스프린트
- `P2-medium`: 다음 스프린트
- `P3-low`: 백로그

### 상태
- `status:planning`: 계획 중
- `status:in-progress`: 진행 중
- `status:review`: 리뷰 대기
- `status:blocked`: 블로킹됨

### 노드 출처
- `from:planner`: 기획 노드
- `from:strategist`: 전략 노드
- `from:orchestrator`: 오케스트라

### 유형
- `type:feature`: 새 기능
- `type:fix`: 버그 수정
- `type:refactor`: 리팩토링
- `type:docs`: 문서

---

## 🔗 커뮤니케이션 채널

| 상황 | 채널 | 예시 |
|------|------|------|
| 새 요청 | GitHub Issue | 기능 요청, 버그 리포트 |
| 명확화 필요 | Issue Comment | 질문/답변 |
| 방향성 논의 | Discussion | 아키텍처 결정 |
| 긴급 | Slack/Discord | 블로커 발생 시 |
| 최종 결정 | Issue/PR | 모든 결정은 GitHub에 기록 |

---

## 📊 진행 상황 추적

### Daily (개발팀)
```bash
# 진행 중인 Issue 확인
gh issue list --label "status:in-progress"
```

### Weekly (오케스트라)
```bash
# 이번 주 완료된 Issue
gh issue list --state closed --label "P1-high"

# 블로킹된 Issue
gh issue list --label "status:blocked"
```

---

## 🎯 핵심 원칙 요약

### 외부 노드 → 개발팀
1. **Issue로만 요청** (구두 요청 ❌)
2. **성공 기준 필수** (모호한 요청 ❌)
3. **범위 명확화** (3개 이하 요구사항)

### 개발팀 → 외부 노드
1. **계획 먼저 공유** (바로 구현 ❌)
2. **검증 결과 보고** (완료만 알림 ❌)
3. **범위 확장 거부** (새 Issue로 분리)

### 오케스트라 역할
1. **우선순위 결정** (Label 관리)
2. **충돌 해결** (리소스 경합 시)
3. **로드맵 조율** (전략과 실행 연결)

---

**마지막 업데이트**: 2025-01-06
**버전**: 1.0
